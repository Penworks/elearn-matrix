(function(e,t){"use strict";function r(e,n){var r=0;e.find(".freeform_delete_button:last").hide();e.delegate("."+n+" input","keyup",function(){var i=this;clearTimeout(r);r=setTimeout(function(){var r=t(i),s=r.parent();if(t.trim(r.val())!==""&&s.is(t("."+n+":last",e))){var o=s.clone();o.find("input").each(function(e,n){var r=t(this);if(r.is('[type="text"]'))r.val("");else{r.attr("selected")&&r.attr("selected",!1);r.attr("checked")&&r.attr("checked",!1)}var i=/([a-zA-Z\_\-]+)\[([0-9]+)\]/ig.exec(t(this).attr("name"));i&&t(this).attr("name",i[1]+"["+(parseInt(i[2],10)+1)+"]")});s.parent().append(o);s.find(".freeform_delete_button").show()}},250)})}function i(e,r,i){if(r=="channel_field"||e=="channel_field")return;var s=[],o=t('textarea[name="'+i+'list_nld_textarea_input"]'),u=t('input[name*="'+i+'list_holder_input"]'),a=t('input[name*="'+i+'list_value_holder_input"]'),f=t('input[name*="'+i+'list_label_holder_input"]'),l=t("#"+i+"type_value_label_holder"),c=t("#"+i+"type_list_holder"),h,p;if(e=="nld_textarea"){var d=o.val().split(/\n\r|\n|\r/ig);for(h=0,p=d.length;h<p;h++){var v=d[h];v!==""&&s.push(v)}}else e=="value_label"?f.each(function(){var e=t(this).val();e!==""&&s.push(e)}):e=="list"&&u.each(function(){var e=t(this).val();e!==""&&s.push(e)});if(s.length===0)return;var m,g;if(r=="nld_textarea")o.val(s.join("\n"));else if(r=="value_label"){var y={};f.each(function(e){var t=n.formPrep(f.eq(e).val()),r=n.formPrep(a.eq(e).val());t!==""&&r!==""&&(y[t]=r)});m=t(".value_label_holder_input",l);g=m.eq(0).clone();m.remove();s.push("");for(h=0,p=s.length;h<p;h++){var b=n.shortName(s[h]);b===""&&(b=s[h]);var w=g.clone(),E=w.find('input[name*="'+i+'list_value_holder_input"]'),S=w.find('input[name*="'+i+'list_label_holder_input"]');E.attr("name",i+"list_value_holder_input["+h+"]").val(typeof y[s[h]]!="undefined"?y[s[h]]:b);S.attr("name",i+"list_label_holder_input["+h+"]").val(s[h]);l.append(w)}l.find(".freeform_delete_button").show().last().hide()}else if(r=="list"){m=t(".list_holder_input",c);g=m.eq(0).clone();m.remove();s.push("");for(h=0,p=s.length;h<p;h++)c.append(g.clone().find('input[name*="'+i+'list_holder_input"]').val(s[h]).end());c.find(".freeform_delete_button").show().last().hide()}}var n=e.Freeform=e.Freeform||{};n.shortName=function(e){var t="",n="_",r="",i={223:"ss",224:"a",225:"a",226:"a",229:"a",227:"ae",230:"ae",228:"ae",231:"c",232:"e",233:"e",234:"e",235:"e",236:"i",237:"i",238:"i",239:"i",241:"n",242:"o",243:"o",244:"o",245:"o",246:"oe",249:"u",250:"u",251:"u",252:"ue",255:"y",257:"aa",269:"ch",275:"ee",291:"gj",299:"ii",311:"kj",316:"lj",326:"nj",353:"sh",363:"uu",382:"zh",256:"aa",268:"ch",274:"ee",290:"gj",298:"ii",310:"kj",315:"lj",325:"nj",352:"sh",362:"uu",381:"zh"};t!==""&&e.substr(0,t.length)==t&&(e=e.substr(t.length));e=e.toLowerCase();t=0;for(var s=e.length;t<s;t++){var o=e.charCodeAt(t);o>=32&&o<128?r+=e.charAt(t):i.hasOwnProperty(o)&&(r+=i[o])}i=new RegExp(n+"{2,}","g");e=r;e=e.replace("/<(.*?)>/g","");e=e.replace(/\s+/g,n);e=e.replace(/\//g,n);e=e.replace(/[^a-z0-9\-\_]/g,"");e=e.replace(/\+/g,n);e=e.replace(i,n);e=e.replace(/-$/g,"");e=e.replace(/_$/g,"");e=e.replace(/^_/g,"");e=e.replace(/^-/g,"");e=e.replace(/\.+$/g,"");return e};n.insertToTextarea=function(e,t,n){n=n||!1;if(!n&&typeof e.selectionEnd!="undefined"&&!isNaN(e.selectionEnd)){var r=e.textLength,i=e.selectionStart,s=e.selectionEnd,o=e.value.substring(0,i),u=e.value.substring(i,s),a=e.value.substring(s,r),f=i+t.length;e.value=o+t+a;e.focus();e.selectionStart=f;e.selectionEnd=f}else if(document.selection){e.focus();document.selection.createRange().text=t;e.blur();e.focus()}else e.value+=t};n.tabTextarea=function(e,t){var n="    ";if(e.keyCode==9){typeof e.preventDefault!="undefined"&&e.preventDefault();var r=t.scrollTop;e.returnValue=!1;if(t.setSelectionRange){var i=t.selectionStart+4;t.value=t.value.substring(0,t.selectionStart)+n+t.value.substring(t.selectionEnd,t.value.length);setTimeout(function(){t.focus();t.setSelectionRange(i,i)},0)}else{t.focus();document.selection.createRange().text=n;t.blur();t.focus()}t.scrollTop=r;t.focus()}};n.autoGenerateShortname=function(e,t,r){var i=r.attr("checked")=="checked";r.change(function(){i=r.attr("checked")=="checked";i&&e.keyup()});e.keyup(function(){i&&t.val(n.shortName(e.val()))}).keyup()};n.formPrep=function(e){return t.trim(e.replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"))};n.autoDupeLastInput=r;n.setupMultiRowDelegate=function(e,n){e=e||"list";n=n||"";t(function(){var s=t("#"+n+"list_type"),o=t("#"+n+"list_types button"),u=t("#"+n+"option_holder > div"),a=t("#"+n+"type_list_holder"),f=t("#"+n+"type_value_label_holder"),l=t("#"+n+"type_nld_textarea_holder");r(a,"list_holder_input");r(f,"value_label_holder_input");u.delegate(".freeform_delete_button","click",function(){t(this).parent().remove()});u.hide();o.each(function(){var r=t(this),a=r.attr("data-value");if(a==e){r.addClass("active");t("#type_"+a+"_holder").show()}r.click(function(f){o.removeClass("active");r.addClass("active");u.hide();t("#type_"+a+"_holder").show();i(e,a,n);a!="channel_field"&&(e=a);s.val(a);f.preventDefault();return!1})})})};t.fn.sortElements=t.fn.sortElements||function(){var e=[].sort;return function(t,n){n=n||function(){return this};var r=this.map(function(){var e=n.call(this),t=e.parentNode,r=t.insertBefore(document.createTextNode(""),e.nextSibling);return function(){if(t===this)return;t.insertBefore(this,r);t.removeChild(r)}});return e.call(this,t).each(function(e){r[e].call(n.call(this))})}}();t.fn.outerHTML=t.fn.outerHTML||function(){return function(){var e=t(this);if(e[0]&&typeof e[0].outerHTML!="undefined")return e[0].outerHTML;var n=e.wrap("<div></div>").parent().html();e.unwrap();return n}}();t.fn.removeTags=t.fn.removeTags||function(){this.each(function(){jQuery(this).children().length===0?jQuery(this).replaceWith(jQuery(this).text()):jQuery(this).children().unwrap()});return this};var s={};s.PADCHAR="=";s.ALPHA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";s.makeDOMException=function(){var e,t,n=new Error("DOM Exception 5");n.code=n.number=5;n.name=n.description="INVALID_CHARACTER_ERR";n.toString=function(){return"Error: "+n.name+": "+n.message};return n};s.getbyte64=function(e,t){var n=s.ALPHA.indexOf(e.charAt(t));if(n===-1)throw s.makeDOMException();return n};s.getbyte=function(e,t){var n=e.charCodeAt(t);if(n>255)throw s.makeDOMException();return n};s.decode=function(e){e=""+e;var t=s.getbyte64,n,r,i,o=e.length;if(o===0)return e;if(o%4!==0)throw s.makeDOMException();n=0;if(e.charAt(o-1)===s.PADCHAR){n=1;e.charAt(o-2)===s.PADCHAR&&(n=2);o-=4}var u=[];for(r=0;r<o;r+=4){i=t(e,r)<<18|t(e,r+1)<<12|t(e,r+2)<<6|t(e,r+3);u.push(String.fromCharCode(i>>16,i>>8&255,i&255))}switch(n){case 1:i=t(e,r)<<18|t(e,r+1)<<12|t(e,r+2)<<6;u.push(String.fromCharCode(i>>16,i>>8&255));break;case 2:i=t(e,r)<<18|t(e,r+1)<<12;u.push(String.fromCharCode(i>>16))}return u.join("")};s.encode=function(e){if(arguments.length!==1)throw new SyntaxError("Not enough arguments");var t=s.PADCHAR,n=s.ALPHA,r=s.getbyte,i,o,u=[];e=""+e;var a=e.length-e.length%3;if(e.length===0)return e;for(i=0;i<a;i+=3){o=r(e,i)<<16|r(e,i+1)<<8|r(e,i+2);u.push(n.charAt(o>>18));u.push(n.charAt(o>>12&63));u.push(n.charAt(o>>6&63));u.push(n.charAt(o&63))}switch(e.length-a){case 1:o=r(e,i)<<16;u.push(n.charAt(o>>18)+n.charAt(o>>12&63)+t+t);break;case 2:o=r(e,i)<<16|r(e,i+1)<<8;u.push(n.charAt(o>>18)+n.charAt(o>>12&63)+n.charAt(o>>6&63)+t)}return u.join("")};n.btoa=function(e){return window.btoa?window.btoa(unescape(encodeURIComponent(e))):s.encode(unescape(encodeURIComponent(e)))};n.atob=function(e){return window.atob?decodeURIComponent(escape(window.atob(e))):decodeURIComponent(escape(s.decode(e)))};n.jQUIDialog=function(e){e=t.extend({message:"No Message Defined",ok:"OK",title:"Alert",preventDefault:!0,immediate:!1,modal:!0},e);var n={},r=typeof t.fn.dialog!="undefined",i=t("<div></div>").html(e.message);if(r){typeof e.cancel!="undefined"&&(n[e.cancel]={click:function(){typeof e.cancelClick!="undefined"&&e.cancelClick();t(this).dialog("close")},"class":"submit",text:e.cancel});n[e.ok]={click:function(){typeof e.close!="undefined"&&e.close();typeof e.okClick!="undefined"&&e.okClick();t(this).dialog("close")},"class":"submit",text:e.ok};i.dialog({autoOpen:!1,title:e.title,buttons:n,dialogClass:"ss_jqui_dialog",zIndex:2e3,modal:e.modal,close:function(){t(".ui-dialog.ss_jqui_dialog").remove()}})}var s=function(t){t&&e.preventDefault&&t.preventDefault();r?i.dialog("open"):alert(e.message);if(t&&e.preventDefault)return!1};if(!e.immediate)return s;s()};n.setUpChosenSelect=function(e){e=e||t("body");if(typeof t.fn.chosen!="undefined"){t(".chzn_select",e).chosen();t(".chzn_select_no_search",e).each(function(){var e=t(this);e.chosen();t("#"+e.attr("id")+"_chzn .chzn-search").hide()})}};n.elementSearch=function(e,n,r,i){var s=t(e),o=t(n);s.bind("keyup",function(e){var n=t(this);n.val()===""||n.attr("placeholder")&&n.val()==n.attr("placeholder")?o.show():o.hide();var s=new RegExp(n.val().toLowerCase());o.filter(function(e){var n=t(this),o=n,u;r&&(o=o.find(r));i!="html"&&i!="text"&&o.attr(i)?u=o.attr(i):i=="text"?u=o.text():u=o.html();return s.exec(u.toLowerCase())}).show()});s.bind("keydown",function(e){if(e.keyCode==13)return!1});return s};n.strRepeat=function(e,t){var n="";while(t--)n+=e;return n};n.fractionToFloat=function(e,t,n){n=n||100;return Math.round(100*e/t*n)/100};n.getUrlArgs=function(e){e=e||window.location.href;var t={},n=e.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(e,n,r){t[n]=r});return t};var o=[];n.cycle=function(e){t.isArray(e)||(e=Array.prototype.slice.call(arguments));var n=e.join("|");typeof o[n]=="undefined"||typeof e[o[n]+1]=="undefined"?o[n]=0:o[n]++;return e[o[n]]};n.clearCycle=function(){o=[];return this};n.showValidationErrors=function(e,n,r){r=r||!1;var i=-1,s=!1;t.each(e,function(e,o){var u,a;a=t('[name="'+e+'"]',n).closest("tr");a.length===0&&(a=t("#"+e,n));if(a.length===0)return;u=a.find(".validation_error_holder .validation_error");if(u.length===0)return;u.parent().show();if(r){var f=u.offset();if(i==-1||f.top<=i){i=f.top;s=u}}var l=t.isArray(o)?o.join("<br/>"):o;u.html(l)});s&&typeof t.fn.smoothScroll!="undefined"&&t.smoothScroll({scrollTarget:s})};t(function(){t("body").delegate(".freeform_notice .notice_close","click",function(e){e.preventDefault();t(this).parent().slideUp();return!1});t.support.placeholder="placeholder"in document.createElement("input");if(!t.support.placeholder){t("[placeholder]").focus(function(){var e=t(this);if(e.val()==e.attr("placeholder")){e.val("");e.removeClass("placeholder")}}).blur(function(){var e=t(this);if(e.val()===""||e.val()==e.attr("placeholder")){e.addClass("placeholder");e.val(e.attr("placeholder"))}}).blur();t("[placeholder]").parents("form").bind("submit",function(){t(this).find("[placeholder]").each(function(){var e=t(this);e.val()==e.attr("placeholder")&&e.val("")})})}n.setUpChosenSelect();t.support.minHWBorderBox=function(){var e=t('<div id="#border-box-test">border box test</div>').css({"min-height":"50px",padding:"10px","-webkit-box-sizing":"content-box","-moz-box-sizing":"content-box","box-sizing":"content-box"}).appendTo("body"),n=e.outerHeight();e.css({"-webkit-box-sizing":"border-box","-moz-box-sizing":"border-box","box-sizing":"border-box"});var r=e.outerHeight();e.remove();return r!=n}();t.support.minHWBorderBox||t("body").addClass("broken_min_border_box");var e=t("#fancybox-content"),r=t("#mainContent .solspace_ui_wrapper:first");if(e.length>0){r.hasClass("ie8")&&e.addClass("ie8");r.hasClass("ie9")&&e.addClass("ie9")}})})(window,jQuery);